import "@testing-library/jest-dom"
import { act, render, screen, waitFor } from "@testing-library/react"
import Fixing from "../../components/fixing/fixing"

const mockProps = {
  "eventCalls":[{"id":60,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","startTime":"2023-01-26T10:00:00.000Z","endTime":"2023-01-26T13:00:00.000Z","venue":"Maida Vale","eventId":42,"fixerEmail":"danielmolloy_6@icloud.com"},{"id":59,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","startTime":"2023-01-26T14:00:00.000Z","endTime":"2023-01-26T17:00:00.000Z","venue":"Maida Vale","eventId":42,"fixerEmail":"danielmolloy_6@icloud.com"}],"eventId":42,"instrumentSections":[{"id":365,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:01:37.908Z","eventId":42,"instrumentName":"Violin","numToBook":1,"callOrder":"Ordered","musicians":[{"id":54,"createdAt":"2023-01-26T19:01:37.938Z","updatedAt":"2023-01-26T19:03:13.288Z","recieved":true,"accepted":false,"musicianEmail":"Catalina_Hermann@yahoo.com","eventInstrumentId":365,"bookingOrAvailability":"Booking","musician":{"name":"Tyler Hoppe"},"calls":[{"id":59},{"id":60}]},{"id":55,"createdAt":"2023-01-26T19:01:37.964Z","updatedAt":"2023-01-26T19:03:34.791Z","recieved":true,"accepted":false,"musicianEmail":"Abigail_Torp@gmail.com","eventInstrumentId":365,"bookingOrAvailability":"Booking","musician":{"name":"Benjamin Zieme"},"calls":[{"id":59},{"id":60}]},{"id":56,"createdAt":"2023-01-26T19:01:37.970Z","updatedAt":"2023-01-26T19:03:58.504Z","recieved":true,"accepted":true,"musicianEmail":"Ida_Wilderman90@yahoo.com","eventInstrumentId":365,"bookingOrAvailability":"Booking","musician":{"name":"Kara Rau"},"calls":[{"id":59},{"id":60}]}]},{"id":366,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","eventId":42,"instrumentName":"Viola","numToBook":1,"callOrder":"Ordered","musicians":[]},{"id":367,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","eventId":42,"instrumentName":"Cello","numToBook":1,"callOrder":"Ordered","musicians":[]},{"id":368,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-27T16:14:13.371Z","eventId":42,"instrumentName":"Double Bass","numToBook":1,"callOrder":"Ordered","musicians":[{"id":59,"createdAt":"2023-01-27T16:14:13.407Z","updatedAt":"2023-01-27T16:14:22.842Z","recieved":true,"accepted":false,"musicianEmail":"Owen.Collins@hotmail.com","eventInstrumentId":368,"bookingOrAvailability":"Booking","musician":{"name":"Justin Schulist"},"calls":[{"id":59},{"id":60}]},{"id":60,"createdAt":"2023-01-27T16:14:13.424Z","updatedAt":"2023-01-27T16:14:45.230Z","recieved":true,"accepted":false,"musicianEmail":"Golda_Stark@hotmail.com","eventInstrumentId":368,"bookingOrAvailability":"Booking","musician":{"name":"Tanya Gusikowski"},"calls":[{"id":59},{"id":60}]},{"id":61,"createdAt":"2023-01-27T16:14:13.459Z","updatedAt":"2023-01-27T16:15:12.060Z","recieved":true,"accepted":false,"musicianEmail":"Ramon_Christiansen83@gmail.com","eventInstrumentId":368,"bookingOrAvailability":"Booking","musician":{"name":"Erick Wilderman"},"calls":[{"id":59},{"id":60}]},{"id":62,"createdAt":"2023-01-27T16:14:13.470Z","updatedAt":"2023-01-27T16:15:19.958Z","recieved":true,"accepted":true,"musicianEmail":"danielmolloy_6@icloud.com","eventInstrumentId":368,"bookingOrAvailability":"Booking","musician":{"name":"danmolloy"},"calls":[{"id":59},{"id":60}]}]},{"id":369,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","eventId":42,"instrumentName":"Flute","numToBook":1,"callOrder":"Ordered","musicians":[]},{"id":370,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-27T16:17:32.156Z","eventId":42,"instrumentName":"Oboe","numToBook":1,"callOrder":"Ordered","musicians":[{"id":63,"createdAt":"2023-01-27T16:17:32.172Z","updatedAt":"2023-01-27T16:17:44.846Z","recieved":true,"accepted":false,"musicianEmail":"Rosanna.McGlynn@hotmail.com","eventInstrumentId":370,"bookingOrAvailability":"Booking","musician":{"name":"Carole Rodriguez"},"calls":[{"id":59},{"id":60}]},{"id":64,"createdAt":"2023-01-27T16:17:32.208Z","updatedAt":"2023-01-27T16:19:57.506Z","recieved":true,"accepted":true,"musicianEmail":"Lora.Lubowitz17@gmail.com","eventInstrumentId":370,"bookingOrAvailability":"Booking","musician":{"name":"Leticia Dibbert"},"calls":[{"id":59},{"id":60}]},{"id":65,"createdAt":"2023-01-27T16:17:32.218Z","updatedAt":"2023-01-27T16:17:32.218Z","recieved":false,"accepted":null,"musicianEmail":"Arlie_Runolfsson49@yahoo.com","eventInstrumentId":370,"bookingOrAvailability":"Booking","musician":{"name":"Kelli Denesik"},"calls":[{"id":59},{"id":60}]},{"id":66,"createdAt":"2023-01-27T16:17:32.297Z","updatedAt":"2023-01-27T16:17:32.297Z","recieved":false,"accepted":null,"musicianEmail":"Malika.Dooley@gmail.com","eventInstrumentId":370,"bookingOrAvailability":"Booking","musician":{"name":"Miss Kenny Barton"},"calls":[{"id":59},{"id":60}]}]},{"id":371,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","eventId":42,"instrumentName":"Clarinet","numToBook":1,"callOrder":"Ordered","musicians":[]},{"id":372,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-27T16:20:15.975Z","eventId":42,"instrumentName":"Bassoon","numToBook":1,"callOrder":"Ordered","musicians":[{"id":67,"createdAt":"2023-01-27T16:20:15.985Z","updatedAt":"2023-01-27T16:20:24.052Z","recieved":true,"accepted":false,"musicianEmail":"Icie_Lang68@gmail.com","eventInstrumentId":372,"bookingOrAvailability":"Booking","musician":{"name":"Irma Homenick"},"calls":[{"id":59},{"id":60}]},{"id":68,"createdAt":"2023-01-27T16:20:15.995Z","updatedAt":"2023-01-27T16:20:24.666Z","recieved":true,"accepted":null,"musicianEmail":"Marquis.Ruecker@gmail.com","eventInstrumentId":372,"bookingOrAvailability":"Booking","musician":{"name":"Milton Dicki"},"calls":[{"id":59},{"id":60}]}]},{"id":373,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","eventId":42,"instrumentName":"Horn","numToBook":1,"callOrder":"Ordered","musicians":[]},{"id":374,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-27T16:23:26.226Z","eventId":42,"instrumentName":"Trumpet","numToBook":1,"callOrder":"Ordered","musicians":[{"id":69,"createdAt":"2023-01-27T16:23:26.238Z","updatedAt":"2023-01-27T16:24:36.880Z","recieved":true,"accepted":false,"musicianEmail":"Adele_Adams@gmail.com","eventInstrumentId":374,"bookingOrAvailability":"Booking","musician":{"name":"Mathew Padberg"},"calls":[{"id":59},{"id":60}]},{"id":70,"createdAt":"2023-01-27T16:23:26.248Z","updatedAt":"2023-01-27T16:24:43.015Z","recieved":true,"accepted":false,"musicianEmail":"Daphne38@gmail.com","eventInstrumentId":374,"bookingOrAvailability":"Booking","musician":{"name":"Ollie McLaughlin"},"calls":[{"id":59},{"id":60}]}]},{"id":375,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-27T16:25:40.857Z","eventId":42,"instrumentName":"Trombone","numToBook":1,"callOrder":"Ordered","musicians":[{"id":71,"createdAt":"2023-01-27T16:25:40.882Z","updatedAt":"2023-01-27T16:26:06.023Z","recieved":true,"accepted":false,"musicianEmail":"Haley14@yahoo.com","eventInstrumentId":375,"bookingOrAvailability":"Booking","musician":{"name":"Mr. Amy Gislason"},"calls":[{"id":59},{"id":60}]},{"id":72,"createdAt":"2023-01-27T16:25:40.891Z","updatedAt":"2023-01-27T16:25:53.198Z","recieved":true,"accepted":false,"musicianEmail":"Abelardo_Vandervort71@hotmail.com","eventInstrumentId":375,"bookingOrAvailability":"Booking","musician":{"name":"Darnell Graham"},"calls":[{"id":59},{"id":60}]}]},{"id":376,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-27T16:29:25.717Z","eventId":42,"instrumentName":"Tuba","numToBook":1,"callOrder":"Ordered","musicians":[{"id":73,"createdAt":"2023-01-27T16:27:00.296Z","updatedAt":"2023-01-27T16:31:12.078Z","recieved":true,"accepted":false,"musicianEmail":"Quincy58@hotmail.com","eventInstrumentId":376,"bookingOrAvailability":"Booking","musician":{"name":"Felipe Wilderman"},"calls":[{"id":59},{"id":60}]},{"id":74,"createdAt":"2023-01-27T16:29:25.745Z","updatedAt":"2023-01-27T16:32:17.735Z","recieved":true,"accepted":false,"musicianEmail":"Julien3@gmail.com","eventInstrumentId":376,"bookingOrAvailability":"Booking","musician":{"name":"Miss Kellie Considine"},"calls":[{"id":59},{"id":60}]},{"id":75,"createdAt":"2023-01-27T16:29:25.790Z","updatedAt":"2023-01-27T16:32:25.648Z","recieved":true,"accepted":false,"musicianEmail":"Jenifer.Casper@yahoo.com","eventInstrumentId":376,"bookingOrAvailability":"Booking","musician":{"name":"Juan Reichert"},"calls":[{"id":59},{"id":60}]},{"id":76,"createdAt":"2023-01-27T16:29:25.828Z","updatedAt":"2023-01-27T16:35:11.588Z","recieved":true,"accepted":false,"musicianEmail":"Lane14@hotmail.com","eventInstrumentId":376,"bookingOrAvailability":"Booking","musician":{"name":"Randal Denesik"},"calls":[{"id":59},{"id":60}]}]},{"id":377,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","eventId":42,"instrumentName":"Harp","numToBook":1,"callOrder":"Ordered","musicians":[]},{"id":378,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","eventId":42,"instrumentName":"Timpani","numToBook":1,"callOrder":"Ordered","musicians":[]},{"id":379,"createdAt":"2023-01-26T19:00:34.880Z","updatedAt":"2023-01-26T19:00:34.880Z","eventId":42,"instrumentName":"Percussion","numToBook":1,"callOrder":"Ordered","musicians":[]}]
}
const mockData = [
  {"id":"cl5jlqw1e0057t6u07993b5w1","name":"Ollie McLaughlin","email":"Daphne38@gmail.com","emailVerified":null,"image":null,"instrument":"Trumpet","profileInfo":null,"isFixer":null},{"id":"cl5jlqzfg0064t6u0l73nhzz5","name":"Phyllis Lowe","email":"Naomi_Bogisich@gmail.com","emailVerified":null,"image":null,"instrument":"Percussion","profileInfo":null,"isFixer":null},{"id":"cl5jlt9aq0081t6u0d3mrzhj1","name":"Mathew Padberg","email":"Adele_Adams@gmail.com","emailVerified":null,"image":null,"instrument":"Trumpet","profileInfo":null,"isFixer":null},{"id":"cl5jltauc0088t6u0hlal6nyp","name":"Felipe Wilderman","email":"Quincy58@hotmail.com","emailVerified":null,"image":null,"instrument":"Tuba","profileInfo":null,"isFixer":null},{"id":"cl5jltcy10095t6u0v9e2qu91","name":"Kara Rau","email":"Ida_Wilderman90@yahoo.com","emailVerified":null,"image":null,"instrument":"Violin","profileInfo":null,"isFixer":null},{"id":"cl5jlte9d0102t6u0r13plqsm","name":"Miss Kellie Considine","email":"Julien3@gmail.com","emailVerified":null,"image":null,"instrument":"Tuba","profileInfo":null,"isFixer":null},{"id":"cl5jltfk10109t6u0gv0gv94p","name":"Nina Kuhlman","email":"Alexys.Bahringer@hotmail.com","emailVerified":null,"image":null,"instrument":"Viola","profileInfo":null,"isFixer":null},{"id":"cl5jltnvz0121t6u02l7yfw57","name":"Michelle Larkin","email":"Laurie55@gmail.com","emailVerified":null,"image":null,"instrument":"Harp","profileInfo":null,"isFixer":null},{"id":"cl5jltp1r0128t6u0snfds4z3","name":"Mr. Amy Gislason","email":"Haley14@yahoo.com","emailVerified":null,"image":null,"instrument":"Trombone","profileInfo":null,"isFixer":null},{"id":"cl5jltq750135t6u0gih5gpsg","name":"Milton Dicki","email":"Marquis.Ruecker@gmail.com","emailVerified":null,"image":null,"instrument":"Bassoon","profileInfo":null,"isFixer":null},{"id":"cl5jltr4i0142t6u09sql0jre","name":"Justin Schulist","email":"Owen.Collins@hotmail.com","emailVerified":null,"image":null,"instrument":"Double Bass","profileInfo":null,"isFixer":null},{"id":"cl5jltryz0149t6u0r9q3u10j","name":"Kent Gusikowski","email":"Beverly_Dickens63@hotmail.com","emailVerified":null,"image":null,"instrument":"Harp","profileInfo":null,"isFixer":null},{"id":"cl5jltsxw0156t6u0tj0hlukn","name":"Hilda Thiel","email":"Lennie_Lindgren92@yahoo.com","emailVerified":null,"image":null,"instrument":"Timpani","profileInfo":null,"isFixer":null},{"id":"cl5jlttz50163t6u0ueg5626j","name":"Carole Rodriguez","email":"Rosanna.McGlynn@hotmail.com","emailVerified":null,"image":null,"instrument":"Oboe","profileInfo":null,"isFixer":null},{"id":"cl5jltv3g0170t6u0q2wvd4qv","name":"Sharon Goldner","email":"Kristian_Gerhold@yahoo.com","emailVerified":null,"image":null,"instrument":"Horn","profileInfo":null,"isFixer":null},{"id":"cl5jltw9i0177t6u0at4zsqd3","name":"Darnell Graham","email":"Abelardo_Vandervort71@hotmail.com","emailVerified":null,"image":null,"instrument":"Trombone","profileInfo":null,"isFixer":null},{"id":"cl5jltxec0184t6u0qruqcj0s","name":"Javier Hayes","email":"Fred.Oberbrunner@hotmail.com","emailVerified":null,"image":null,"instrument":"Harp","profileInfo":null,"isFixer":null},{"id":"cl5jlu8p10196t6u0dj2c56bq","name":"Leticia Dibbert","email":"Lora.Lubowitz17@gmail.com","emailVerified":null,"image":null,"instrument":"Oboe","profileInfo":null,"isFixer":null},{"id":"cl5jlua0p0203t6u0hhsnv8d9","name":"Mrs. Naomi Emmerich","email":"Ricky.Emard@yahoo.com","emailVerified":null,"image":null,"instrument":"Viola","profileInfo":null,"isFixer":null},{"id":"cl5jlub3q0210t6u0ptm8mazj","name":"Marlon Wisozk","email":"Dawn_Fritsch20@gmail.com","emailVerified":null,"image":null,"instrument":"Harp","profileInfo":null,"isFixer":null},{"id":"cl5jlubx30217t6u08fou8m28","name":"Dean Lueilwitz","email":"Enrique.Pfannerstill65@hotmail.com","emailVerified":null,"image":null,"instrument":"Percussion","profileInfo":null,"isFixer":null},{"id":"cl5jlucy30224t6u0hdd4z7xs","name":"Juan Reichert","email":"Jenifer.Casper@yahoo.com","emailVerified":null,"image":null,"instrument":"Tuba","profileInfo":null,"isFixer":null},{"id":"cl5jludze0231t6u0cfx5hcck","name":"Tyler Hoppe","email":"Catalina_Hermann@yahoo.com","emailVerified":null,"image":null,"instrument":"Violin","profileInfo":null,"isFixer":null},{"id":"cl5jluf2u0238t6u0h3bp1ozo","name":"Kelli Denesik","email":"Arlie_Runolfsson49@yahoo.com","emailVerified":null,"image":null,"instrument":"Oboe","profileInfo":null,"isFixer":null},{"id":"cl5jlugru0245t6u0m5ovtl0v","name":"Benjamin Zieme","email":"Abigail_Torp@gmail.com","emailVerified":null,"image":null,"instrument":"Violin","profileInfo":null,"isFixer":null},{"id":"cl5jlui4y0252t6u0h65ku4wd","name":"Sidney Franecki","email":"Marlee.Stehr@hotmail.com","emailVerified":null,"image":null,"instrument":"Harp","profileInfo":null,"isFixer":null},{"id":"cl5jluj7b0259t6u0jaxddpdx","name":"Erick Wilderman","email":"Ramon_Christiansen83@gmail.com","emailVerified":null,"image":null,"instrument":"Double Bass","profileInfo":null,"isFixer":null},{"id":"cl5jlw4gd0291t6u0xla6oxe5","name":"Teresa Schimmel","email":"Doris_Bernier21@gmail.com","emailVerified":null,"image":null,"instrument":"Percussion","profileInfo":null,"isFixer":null},{"id":"cl5jlw4t40298t6u05wrq1k8y","name":"Jason Denesik","email":"Karli.Rolfson@gmail.com","emailVerified":null,"image":null,"instrument":"Cello","profileInfo":null,"isFixer":null},{"id":"cl5jlw5qz0305t6u0y3x5vcfk","name":"Dr. Gina Tromp","email":"Trenton_Greenfelder27@gmail.com","emailVerified":null,"image":null,"instrument":"Harp","profileInfo":null,"isFixer":null},{"id":"cl5jlw6re0312t6u0zjc0po40","name":"Irma Homenick","email":"Icie_Lang68@gmail.com","emailVerified":null,"image":null,"instrument":"Bassoon","profileInfo":null,"isFixer":null},{"id":"cl5jlw7ln0319t6u09getcn2m","name":"Dr. Tara Zulauf","email":"Joan16@gmail.com","emailVerified":null,"image":null,"instrument":"Trombone","profileInfo":null,"isFixer":null},{"id":"cl5jlw8gk0326t6u078cjd24w","name":"Tanya Gusikowski","email":"Golda_Stark@hotmail.com","emailVerified":null,"image":null,"instrument":"Double Bass","profileInfo":null,"isFixer":null},{"id":"cl5jlw9ba0333t6u0axnxz0gr","name":"Ernestine Dibbert","email":"Marcos.Cassin@yahoo.com","emailVerified":null,"image":null,"instrument":"Horn","profileInfo":null,"isFixer":null},{"id":"cl5jlwa520340t6u01b6nlizn","name":"Miss Kenny Barton","email":"Malika.Dooley@gmail.com","emailVerified":null,"image":null,"instrument":"Oboe","profileInfo":null,"isFixer":null},{"id":"cl5jlwax00347t6u0snxasxvz","name":"Penny Rogahn","email":"Yesenia.Volkman91@yahoo.com","emailVerified":null,"image":null,"instrument":"Harp","profileInfo":null,"isFixer":null},{"id":"cl5jlwbrv0354t6u0wlvtc6uz","name":"Randal Denesik","email":"Lane14@hotmail.com","emailVerified":null,"image":null,"instrument":"Tuba","profileInfo":null,"isFixer":null},{"id":"cl5if30or0054ixu0y1vap3yd","name":"danmolloy","email":"danielmolloy_6@icloud.com","emailVerified":null,"image":"https://avatars.githubusercontent.com/u/64697812?v=4","instrument":"Double Bass","profileInfo":null,"isFixer":null}
]

global.fetch = jest.fn(() =>
  Promise.resolve({
    json: () => Promise.resolve(
      mockData
      )
  })
);

describe("Fixing component", () => {
  beforeEach(async () => {
    //render(<Fixing {...mockProps} />)
    await act(async() => {
      await waitFor(() => {
        render(<Fixing 
          refreshProps={jest.fn()} 
          eventCalls={mockProps.eventCalls} 
          instrumentSections={mockProps.instrumentSections} 
          eventId={mockProps.eventId} />
        )
      })
    })
  })
  it("Renders", () => {
    const fixingDiv = screen.getByTestId("event-fixing")
    expect(fixingDiv).toBeInTheDocument()
  })
})